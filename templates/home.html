<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Book Titles</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <nav class="col-md-2 d-none d-md-block sidebar p-0">
        <div class="position-relative" style="z-index:1">
          <h4 class="mb-2">SG Library</h4>
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link active-link" href="{{ url_for('home') }}">
                <i class="fa-solid fa-address-card me-2"></i>
                Book Titles
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <main class="col-md-10 ms-auto px-md-4 py-3">

        <div class="page-title-bar mb-2">
          <h5 class="mb-0 text-white">BOOK TITLES</h5>
        </div>

        <div class="header-bar d-flex justify-content-between align-items-center mb-3">
          <div class="small label-green">Number of titles: {{ count }}</div>

          <form class="d-flex" method="get" action="{{ url_for('home') }}">
            <label for="category" class="col-form-label me-2 mb-0 label-green">Category</label>
            <select id="category" name="category" class="form-select me-2" style="width:auto">
              {% for c in categories %}
                <option value="{{ c }}" {{ 'selected' if c == selected_category else '' }}>{{ c }}</option>
              {% endfor %}
            </select>
            <button class="btn btn-success" type="submit">Search</button>
          </form>
        </div>

        {% for book in books %}
          <div class="card mb-3">
            <div class="row g-0">
              <div class="col-md-2 p-3">
                <img src="{{ book.url }}" class="img-fluid rounded-start" alt="Cover of {{ book.title }}">
              </div>
              <div class="col-md-10">
                <div class="card-body">
                  <h5 class="card-title mb-1">{{ book.title }}</h5>
                  <p class="text-muted mb-2">By {{ book.authors|join(', ') }}</p>

                  <div class="small text-muted mb-2">
                    Category: {{ book.display_categories|join(', ') }}
                    <br>
                    Pages: {{ book.pages }}
                  </div>

                  {% if book.first_paragraph %}
                    <p class="mb-2">
                      {{ book.first_paragraph }}
                      {% if book.last_paragraph and book.last_paragraph != book.first_paragraph %}
                        &nbsp;
                        {{ book.last_paragraph }}
                      {% endif %}
                    </p>
                  {% endif %}

                  <div class="text-end">
                    <a href="#" class="btn btn-success btn-sm">More details</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}

      </main>
    </div>
  </div>
</body>
</html>